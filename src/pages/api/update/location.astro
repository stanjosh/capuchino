---
import LocationDisplay from '../../admin/partials/LocationDisplay.astro'
import db from '../../../../lib/db'
const formData = await Astro.request.formData();

const id = formData.get('_id') as string;

let data = Array.from(formData).reduce((acc: any, [key, value]) => {
  acc[key] = formData.get(key);
  return acc;
}, {}) as any;

if (data._id) {
  delete data._id;
  await db.location.update(id, data);
} else {
  await db.location.create(data);
}






// const location = await db.location.getOne(id) as any;



const index = formData.get('index') as string;
console.log(data);
---

<LocationDisplay data={location} index={index} >



